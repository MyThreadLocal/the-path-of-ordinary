1、项目中如何使用 mq 的？

​		异步去处理请求，非核心逻辑异步去处理了，举例返利、第三方系统对接。

​		异步：

​			返利：涉及大数据量的计算，这个是需要异步去处理的，晚上处理自动运行、白天处理手动触发。

​				手动触发会涉及重复点击，重复点击这种，配合 redis 做限流，针对大区，每十分钟只能跑一次，每天只能跑多少次之类的，后				续操作都降级处理。返利不用管重复消费问题。

​			活动-核销-扣减预算流程：业务链很长，做完活动后剩余部分以 mq 的形式通知其他服务，可能会有重复消费的情况，重复核销、				重复扣预算，在核销时，会根据获得号去查该活动是否已经做过核销。扣减、回退预算，根据流水号活动编码，保证幂等性。可				能存在事务问题，直接消费失败，根据异常的类型，如果是业务异常，则用es去记录日志，反之重试机制，死信队列。

​			对接第三方审批流：某些有很长业务处理链条的场景，需要提交审批流时可能会有重复消费问题，先反查上游单据状态，主要通过				上游消息生成的流水号去判断，流水号重复则直接 pass。

​			活动规划生成预算：涉及大批量计算逻辑的处理，异步去做处理。

​		削峰：

​			移动访销：香飘飘每天有很多业务员会去做门店拜访，代客下单之类，高峰期（10:00-11:30、1:30-4:30）系统并发量较高，这期				间类似于下单，拜访操作都是异步进行的。

​		解耦：

​			主数据调整：类似于组织架构调整，对应冗余在其他表的组织信息也会修改，只要通过发mq去修改。

​			tpm与sfa互动：tpm活动信息修改，发送mq去调整sfa已经推送的活动。

​		消息丢失问题：

​			关键的流程才会去做事务消息的处理，对于一般的发送消息，提交审批流等。

​		重复消息问题：

​			对消费者采用幂等性处理。同一个流水号的数据，不能重复去消费。

2、项目中如何使用 redis 的？

​		缓存：

​			对于热点数据，但是改动又不频繁的，比如：活动、商品数据，客户数据，对其做缓存，避免频繁查询数据库，每次修改就删除缓			存。key值设置：act:XXXXXXX。

​		特殊限流：

​			对于大区，去做返利计算，规划预算时，因为涉及数据量大，都不会去允许频繁操作。

​		分布式锁：

​			预算操作：涉及预算的操作，都加分布式锁。

​			重复操作：涉及重复操作的按钮，都加锁。

3、项目中使用了分布式事务吗？

​		分布式事务框架Seata：

​			对于本项目的不同模块，使用 Seata 的 AT 模式，进行回滚。还可以使用 TCC 模式。

​		手写补偿 TCC 模式：

​			与第三方系统对接，或者非数据库的操作，没有办法使用 Seata ，只能考虑手写补偿。

​			同步：多模块链，一般在最后调用第三方系统，如果其它模块处理失败了，直接抛异常处理。

​			异步：发送 mq 调用，手写补偿方法。

​		MQ 事务消息

4、项目中如何进行 sql 调优的？

​		索引：

​			建索引，索引匹配问题。

​		分库分表：

​			分库分表后的数据统计问题（二次查找方案）。

5、项目的难点？如何优化的？

​		难点及优化：

​			第三方系统对接，包括分布式事务问题：

​				响应快速，类似 oa 这种，只是推送单条审批数据，一般直接同步调用，等待第三方系统返回的结果，成功就提交，失

​				败就回滚。

​			不断增长的庞大数据量：

​				分表处理，落地二次查找的方案。

​			移动访销高并发请求，高并发操作时，系统卡顿：

​				对商品数据进行缓存处理，对访销操作进行异步化改造。

6、有什么要问的吗？

​		公司技术栈。项目是哪些方面的呢？

​		了解一下每年评级调整情况，如何晋升的呢？升内部具体的情况。

​		公司薪资涨幅情况。

​		加班情况以及出差。